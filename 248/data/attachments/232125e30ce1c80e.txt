var jsonData = pm.response.json();

pm.test("Response status is 'success'", function () {
    pm.expect(jsonData.status).to.eql("success");
});

pm.test("Test details are valid", function () {
    pm.expect(jsonData.results[0].testDetails.testName).to.not.be.empty;
    pm.expect(jsonData.results[0].testDetails.sampleType).to.not.be.empty;
    pm.expect(jsonData.results[0].testDetails.description).to.be.null;
});

pm.test("Results are valid", function () {
    pm.expect(jsonData.results[0].results.resultFile).to.include("https://");
    pm.expect(jsonData.results[0].results.notes).to.be.a('string');
});

pm.test("User details are valid", function () {
    pm.expect(jsonData.results[0].userType).to.not.be.empty;
    pm.expect(jsonData.results[0].testType).to.not.be.empty;
    pm.expect(jsonData.results[0].status).to.eql("completed");
});

pm.test("Timestamps and version are valid", function () {
    pm.expect(jsonData.results[0].createdAt).to.not.be.null;
    pm.expect(jsonData.results[0].updatedAt).to.not.be.null;
    pm.expect(jsonData.results[0].__v).to.eql(0);
});
