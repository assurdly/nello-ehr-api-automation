var jsonData = pm.response.json();

pm.test("Response status code is 400", function () {
    pm.response.to.have.status(400);
});

pm.test("Password validation errors are present", function () {
    pm.expect(jsonData.status).to.eql("failed");
    pm.expect(jsonData.error).to.be.an("array").and.to.have.length.above(0);
});

pm.test("Password validation rules are enforced", function () {
    pm.expect(jsonData.error[0].msg).to.include("password must be at least 8 characters long");
    pm.expect(jsonData.error[1].msg).to.include("Password must contain at least one uppercase letter");
    pm.expect(jsonData.error[2].msg).to.include("Password must contain at least one number");
    pm.expect(jsonData.error[3].msg).to.include("Password must contain at least one special character");
});
