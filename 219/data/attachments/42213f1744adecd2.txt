var jsonData = pm.response.json();

pm.test("Response status is success and code is 200", function () {
    pm.expect(jsonData.status).to.eql("success");
    pm.response.to.have.status(200);
});

pm.test("Validate non-null and valid fields", function () {
    pm.expect(jsonData.result.testDetails.testName).to.be.a('string').that.is.not.empty.and.to.not.be.undefined;
    pm.expect(jsonData.result.testDetails.sampleType).to.be.a('string').that.is.not.empty.and.to.not.be.undefined;
    pm.expect(jsonData.result.results.resultFile).to.be.a('string').that.is.not.empty.and.to.not.be.undefined;
    pm.expect(jsonData.result.results.notes).to.be.a('string').that.is.not.empty.and.to.not.be.undefined;
    pm.expect(jsonData._id).to.be.a('string').that.is.not.empty.and.to.not.be.undefined;
    pm.expect(jsonData.encounterUuid).to.be.a('string').that.is.not.empty.and.to.not.be.undefined;
    pm.expect(jsonData.userType).to.be.a('string').that.is.not.empty.and.to.not.be.undefined;
    pm.expect(jsonData.testType).to.be.a('string').that.is.not.empty.and.to.not.be.undefined;
    pm.expect(jsonData.status).to.be.a('string').that.is.not.empty.and.to.not.be.undefined;
    pm.expect(jsonData.uploadedBy).to.be.a('string').that.is.not.empty.and.to.not.be.undefined;
    pm.expect(jsonData.createdAt).to.be.a('string').that.is.not.empty.and.to.not.be.undefined;
    pm.expect(jsonData.updatedAt).to.be.a('string').that.is.not.empty.and.to.not.be.undefined;
    pm.expect(jsonData.__v).to.be.a('number').that.is.not.null.and.to.not.be.undefined;
});
